generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Project {
  tenantId  String    @map("tenant_id") @db.Uuid
  id        String
  name      String
  userId    String    @map("user_id")
  chatId    String?   @map("chat_id")
  demoUrl   String?   @map("demo_url")
  createdAt DateTime? @default(now()) @map("created_at") @db.Timestamp(6)
  updatedAt DateTime? @default(now()) @map("updated_at") @db.Timestamp(6)
  messages  Message[]

  @@id([tenantId, id])
  @@map("projects")
}

model Message {
  tenantId  String    @map("tenant_id") @db.Uuid
  id        String
  projectId String    @map("project_id")
  role      String
  content   String
  createdAt DateTime? @default(now()) @map("created_at") @db.Timestamp(6)
  project   Project   @relation(fields: [tenantId, projectId], references: [tenantId, id], onDelete: Cascade, onUpdate: NoAction)

  @@id([tenantId, id])
  @@map("messages")
}

/// This table has subclasses and requires additional setup for migrations. Visit https://pris.ly/d/table-inheritance for more info.
model tenants {
  id         String    @id @default(dbgenerated("public.uuid_generate_v7()")) @db.Uuid
  name       String?
  created    DateTime  @default(dbgenerated("LOCALTIMESTAMP")) @db.Timestamp(6)
  updated    DateTime  @default(dbgenerated("LOCALTIMESTAMP")) @db.Timestamp(6)
  deleted    DateTime? @db.Timestamp(6)
  compute_id String?   @db.Uuid
}
